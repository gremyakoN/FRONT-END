<div controls>
    <button mat-raised-button (click)="report()">
        <mat-icon>assignment</mat-icon>
    </button>
    <button mat-raised-button (click)="export()">
        <mat-icon>save_alt</mat-icon>
    </button>
    <div pagination *ngIf="states.searchPaymentsResult.value && (states.searchPaymentsResult.value.count > 0)">
        <text-label id="pagination"
                    [params]="getPaginationParams()"></text-label>
        <button mat-icon-button
                (click)="prevPage()"
                [disabled]="states.searchPaymentsParams.value.page_number == 1">
            <mat-icon>keyboard_arrow_left</mat-icon>
        </button>
        <button mat-icon-button
                (click)="nextPage()"
                [disabled]="(states.searchPaymentsParams.value.page_number * states.searchPaymentsParams.value.page_size) >= states.searchPaymentsResult.value.count">
            <mat-icon>keyboard_arrow_right</mat-icon>
        </button>
    </div>
</div>
<mat-progress-bar [class.active]="states.searchingPayments.value" mode="indeterminate"></mat-progress-bar>
<mat-card>
    <table mat-table matSort *ngIf="states.searchPaymentsResult.value && (states.searchPaymentsResult.value.count > 0)"
           (matSortChange)="sortData($event)"
           [dataSource]="states.searchPaymentsResult.value.payments" class="mat-elevation-z1">
        <ng-container *ngFor="let column of columns">
            <ng-container [matColumnDef]="column">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    [disabled]="sortableColumns.indexOf(column) == -1">
                    <text-label [id]="'searchPaymentsResults.' + column"></text-label>
                </th>
                <ng-container [ngSwitch]="column" *matCellDef="let element">
                    <td mat-cell *ngSwitchCase="'committee_id'">{{states.committeesByID.value[element[column]].name}}</td>
                    <td mat-cell *ngSwitchCase="'transaction_result'">{{utils.formatJavaDate(element[column])}}</td>
                    <td mat-cell *ngSwitchCase="'amount'">{{utils.toMoney(element[column])}}</td>
                    <td mat-cell *ngSwitchDefault>{{element[column]}}</td>
                </ng-container>
            </ng-container>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="columns"></tr>
        <tr mat-row *matRowDef="let row; columns: columns"></tr>
    </table>
    <h2 class="mat-h2"
        *ngIf="!states.searchingPayments.value && states.searchPaymentsResult.value && (states.searchPaymentsResult.value.count == 0)">
        <text-label id="payments.noResults"></text-label>
    </h2>
</mat-card>
